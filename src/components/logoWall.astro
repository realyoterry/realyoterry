---
const technologies = ['astro', 'react', 'typeScript', 'tailwind', 'node.js', 'HTML5', 'CSS3', 'javaScript', 'git'];
const loopedTechnologies = [...technologies];
---

<div class="relative overflow-hidden py-8">
  <div class="pointer-events-none absolute inset-y-0 left-0 w-32 bg-gradient-to-r from-[var(--background)] to-transparent z-20"></div>
  <div class="pointer-events-none absolute inset-y-0 right-0 w-32 bg-gradient-to-l from-[var(--background)] to-transparent z-20"></div>

  <div class="flex w-max">
    <div class="flex animate-scroll gap-12 md:gap-20 flex-nowrap">
      <div class="w-[10px]"></div>
      {
        loopedTechnologies.map((tech, index) => (
          <div class="flex items-center gap-2 group transition-all duration-300">
            <img id={`image_${tech}`} src={`/svg/${tech}.svg`} alt={tech} class="h-7 w-auto object-contain transition-transform group-hover:scale-110 opacity-60" width="30" height="30" loading="lazy" />
            <span class="text-lg font-medium text-[var(--white-icon)]">{tech.charAt(0).toUpperCase() + tech.slice(1)}</span>
          </div>
        ))
      }
    </div>

    <div class="flex animate-scroll gap-12 md:gap-20 flex-nowrap" aria-hidden="true">
      <div class="w-[10px]"></div>
      {
        loopedTechnologies.map((tech, index) => (
          <div class="flex items-center gap-2 group transition-all duration-300">
            <img id={`image1_${tech}`}src={`/svg/${tech}.svg`} alt={tech} class="h-7 w-auto object-contain transition-transform group-hover:scale-110 opacity-60" width="30" height="30" loading="lazy" />
            <span class="text-lg font-medium text-[var(--white-icon)]">{tech.charAt(0).toUpperCase() + tech.slice(1)}</span>
          </div>
        ))
      }
    </div>
  </div>
</div>

<script>
  const astroImage = document.getElementById('image_astro') as HTMLImageElement;
  const astroImage1 = document.getElementById('image1_astro') as HTMLImageElement;

  window.addEventListener('themeChange', (event: CustomEvent) => {
    if (event.detail === 'light') {
      astroImage.src = '/svg/astrolight.svg';
      astroImage1.src = '/svg/astrolight.svg';
    } else {
      astroImage.src = '/svg/astro.svg';
      astroImage1.src = '/svg/astro.svg';
    }
  })
</script>

<style is:global>
  @keyframes scroll {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-100%);
    }
  }

  .animate-scroll {
    animation: scroll 30s linear infinite;
  }

  @media (min-width: 768px) {
    .animate-scroll {
      animation-duration: 22.5s;
    }
  }
</style>
